{"version":3,"sources":["SearchForm.module.css","AddUsers.module.css","TableHeader.module.css","TableBody.module.css","Table.module.css","App.module.css","SearchForm.js","utils/sort.js","TableHeader.js","TableBody.js","Table.js","AddUsers.js","App.js","hooks/formWithValidation.js","hooks/useDebounce.js","utils/api.js","index.js"],"names":["module","exports","SearchForm","usersToDisplay","setUsersToDisplay","currentUsers","useState","inputSearch","setInputSearch","selectedField","setSelectedField","fields","setFields","searchHints","setSearchHints","useEffect","Object","keys","handleResetSearch","document","addEventListener","removeEventListener","className","styles","form","onSubmit","event","preventDefault","value","onChange","target","formSelect","translatedFields","map","name","field","i","renderSelect","toLowerCase","searchQuery","hints","filter","elem","indexOf","v","a","formInput","formHints","slice","hint","key","formHint","onClick","selectedData","handleHintClick","type","formButton","dynamicSort","property","sortOrder","substr","b","TableHeader","sortCategory","setSortCategory","colSpan","lastCol","categoryName","sort","sortButton","TableBody","length","user","gender","email","currentUsersAfterDelete","usr","handleRowDelete","deleteButton","info","Table","table","AddUsers","usersCountHandleChange","resetForm","values","isValid","errors","inputField","id","usersCount","min","max","required","buttonReset","inputError","inputErrorActive","App","setCurrentUsers","React","setValues","setErrors","setIsValid","useCallback","newErrors","newIsValid","handleChange","validationMessage","closest","checkValidity","useFormWithValidation","usersCountInputDebounced","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","localStorage","getItem","removeItem","setItem","usersNumber","fetch","then","res","json","results","users","renamedGender","title","first","last","catch","err","console","log","app","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.de97bd86.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchForm_form__1AHo6\",\"formSelect\":\"SearchForm_formSelect__2-hcv\",\"formButton\":\"SearchForm_formButton__1Rr0C\",\"formInput\":\"SearchForm_formInput__32CV9\",\"formHints\":\"SearchForm_formHints__3ZMG2\",\"formHint\":\"SearchForm_formHint__2B8jV\",\"formLabel\":\"SearchForm_formLabel__2Uv10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputField\":\"AddUsers_inputField__3Nn2m\",\"buttonReset\":\"AddUsers_buttonReset__3eNAX\",\"inputError\":\"AddUsers_inputError__3rQxI\",\"inputErrorActive\":\"AddUsers_inputErrorActive__3XNnr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sortButton\":\"TableHeader_sortButton__1SVQQ\",\"lastCol\":\"TableHeader_lastCol__1AEMO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"TableBody_info__rYA8T\",\"lastCol\":\"TableBody_lastCol__25mFb\",\"deleteButton\":\"TableBody_deleteButton__3RPWE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"Table_table__ojBh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\"};","import React, { useState, useEffect } from \"react\";\r\nimport styles from \"./SearchForm.module.css\";\r\n\r\nexport default function SearchForm({\r\n  usersToDisplay,\r\n  setUsersToDisplay,\r\n  currentUsers,\r\n}) {\r\n  const [inputSearch, setInputSearch] = useState(\"\");\r\n  const [selectedField, setSelectedField] = useState(\"\");\r\n  const [fields, setFields] = useState([]);\r\n  const [searchHints, setSearchHints] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setFields([...Object.keys(usersToDisplay[0])]);\r\n    setSelectedField(Object.keys(usersToDisplay[0])[0]);\r\n  }, [usersToDisplay]);\r\n\r\n  useEffect(() => {\r\n    function handleResetSearch() {\r\n      setSearchHints([]);\r\n      setInputSearch(\"\");\r\n    }\r\n    document.addEventListener(\"click\", handleResetSearch);\r\n    return () => document.removeEventListener(\"click\", handleResetSearch);\r\n  });\r\n\r\n  const handleSearch = (event) => {\r\n    setInputSearch(event.target.value.toLowerCase());\r\n    const searchQuery = event.target.value.toLowerCase();\r\n\r\n    let findedUsers = usersToDisplay.filter((elem) => {\r\n      return elem[selectedField].toLowerCase().indexOf(searchQuery) !== -1;\r\n    });\r\n    let hints = findedUsers.map((elem) => elem[selectedField]);\r\n    hints = hints.filter((v, i, a) => a.indexOf(v) === i);\r\n    setSearchHints([...hints]);\r\n  };\r\n\r\n  const handleHintClick = (hint) => {\r\n    const selectedData = usersToDisplay.filter((elem) => {\r\n      return elem[selectedField] === hint;\r\n    });\r\n    setUsersToDisplay([...selectedData]);\r\n    setSearchHints([]);\r\n    setInputSearch(\"\");\r\n  };\r\n  const handleResetFilters = () => {\r\n    setUsersToDisplay([...currentUsers]);\r\n  };\r\n\r\n  const renderSelect = () => {\r\n    const translatedFields = fields.map((name) => {\r\n      switch (name) {\r\n        case \"name\":\r\n          return \"имя\";\r\n        case \"gender\":\r\n          return \"пол\";\r\n        default:\r\n          return name;\r\n      }\r\n    });\r\n\r\n    return (\r\n      <>\r\n        {translatedFields.map((field, i) => (\r\n          <option value={[fields[i]]} key={field}>\r\n            {field}\r\n          </option>\r\n        ))}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <form className={styles.form} onSubmit={(event) => event.preventDefault()}>\r\n      <select\r\n        value={selectedField}\r\n        onChange={(event) => setSelectedField(event.target.value)}\r\n        className={styles.formSelect}\r\n      >\r\n        {renderSelect()}\r\n      </select>\r\n      <input\r\n        value={inputSearch}\r\n        onChange={handleSearch}\r\n        className={styles.formInput}\r\n      />\r\n      <div className={styles.formHints}>\r\n        {searchHints.slice(0, 10).map((hint, key) => (\r\n          <p\r\n            className={styles.formHint}\r\n            key={key}\r\n            onClick={() => handleHintClick(hint)}\r\n          >\r\n            {hint}\r\n          </p>\r\n        ))}\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        onClick={handleResetFilters}\r\n        styles={styles.formButton}\r\n      >\r\n        Сбросить фильтры\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n","export default function dynamicSort(property) {\n  let sortOrder = 1;\n  if (property[0] === \"-\") {\n    sortOrder = -1;\n    property = property.substr(1);\n  }\n  return function (a, b) {\n    let result =\n      a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n    return result * sortOrder;\n  };\n}\n","import React, { useState } from \"react\";\nimport SearchForm from \"./SearchForm\";\nimport dynamicSort from \"./utils/sort\";\nimport styles from \"./TableHeader.module.css\";\n\nexport default function TableHeader({\n  usersToDisplay,\n  setUsersToDisplay,\n  currentUsers,\n}) {\n  const [sortCategory, setSortCategory] = useState(\"\");\n\n  const handleTableHeaderClick = (categoryName) => {\n    if (categoryName === sortCategory) {\n      setSortCategory(`-${categoryName}`);\n      setUsersToDisplay([\n        ...usersToDisplay.sort(dynamicSort(`-${categoryName}`)),\n      ]);\n    } else {\n      setSortCategory(categoryName);\n      setUsersToDisplay([...usersToDisplay.sort(dynamicSort(categoryName))]);\n    }\n  };\n\n  const showArrow = () => {\n    let arrow = \"\";\n    if (sortCategory) {\n      arrow = sortCategory.substr(0, 1) === \"-\" ? \"↓\" : \"↑\";\n    } else {\n      arrow = \"↓↑\";\n    }\n    return arrow;\n  };\n\n  return (\n    <thead>\n      <tr>\n        <th colSpan=\"3\">\n          <SearchForm\n            usersToDisplay={usersToDisplay}\n            setUsersToDisplay={setUsersToDisplay}\n            currentUsers={currentUsers}\n          />\n        </th>\n        <th className={styles.lastCol}></th>\n      </tr>\n      <tr>\n        <th>\n          <button\n            onClick={() => handleTableHeaderClick(\"name\")}\n            className={styles.sortButton}\n          >\n            {\" \"}\n            Имя {showArrow()}\n          </button>\n        </th>\n        <th>Пол</th>\n        <th>Email</th>\n        <th className={styles.lastCol}></th>\n      </tr>\n    </thead>\n  );\n}\n","import React from \"react\";\nimport styles from \"./TableBody.module.css\";\n\nexport default function TableBody({ usersToDisplay, setUsersToDisplay }) {\n  const handleRowDelete = (user) => {\n    const currentUsersAfterDelete = usersToDisplay.filter(\n      (usr) => usr.email !== user.email\n    );\n    if (currentUsersAfterDelete.length)\n      setUsersToDisplay([...currentUsersAfterDelete]);\n    else setUsersToDisplay([{}]);\n  };\n\n  const showData = () => {\n    if (Object.keys(usersToDisplay[0]).length) {\n      return (\n        <tbody>\n          {usersToDisplay.map((user, i) => (\n            <tr key={i}>\n              <td key={user.name}>{user.name}</td>\n              <td key={user.gender}>{user.gender}</td>\n              <td key={user.email}>{user.email}</td>\n              <td key={i + \"delete\"} className={styles.lastCol}>\n                <button\n                  onClick={() => handleRowDelete(user)}\n                  className={styles.deleteButton}\n                >\n                  X\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      );\n    } else\n      return (\n        <tbody>\n          <tr>\n            <td className={styles.info} colSpan=\"4\">\n              нет пользователей для отображения\n            </td>\n          </tr>\n        </tbody>\n      );\n  };\n\n  return showData();\n}\n","import React from \"react\";\nimport TableHeader from \"./TableHeader\";\nimport TableBody from \"./TableBody\";\nimport styles from \"./Table.module.css\";\n\nexport default function Table({\n  usersToDisplay,\n  setUsersToDisplay,\n  currentUsers,\n}) {\n  return (\n    <table className={styles.table}>\n      <TableHeader\n        usersToDisplay={usersToDisplay}\n        setUsersToDisplay={setUsersToDisplay}\n        currentUsers={currentUsers}\n      />\n      <TableBody\n        usersToDisplay={usersToDisplay}\n        setUsersToDisplay={setUsersToDisplay}\n      />\n    </table>\n  );\n}\n","import React from \"react\";\nimport styles from \"./AddUsers.module.css\";\n\nexport default function AddUsers({\n  usersCountHandleChange,\n  resetForm,\n  values,\n  isValid,\n  errors,\n}) {\n  return (\n    <form onSubmit={(event) => event.preventDefault()}>\n      <label>\n        Введите количество пользователей для отображения\n        <div className={styles.inputField}>\n          <input\n            id=\"usersCount\"\n            type=\"number\"\n            value={values.usersCount || \"\"}\n            onChange={usersCountHandleChange}\n            name=\"usersCount\"\n            min=\"1\"\n            max=\"100\"\n            required\n          />\n          <button\n            type=\"button\"\n            onClick={(event) =>\n              resetForm(\n                { usersCount: 0 },\n                { usersCount: \"Пожалуйста, введите число.\" },\n                false\n              )\n            }\n            className={styles.buttonReset}\n          >\n            очистить\n          </button>\n          <span\n            className={isValid ? styles.inputError : styles.inputErrorActive}\n          >\n            {errors.usersCount || \"\"}\n          </span>\n        </div>\n      </label>\n    </form>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport Table from \"./Table\";\nimport useDebounce from \"./hooks/useDebounce\";\nimport useFormWithValidation from \"./hooks/formWithValidation\";\nimport getUsers from \"./utils/api\";\nimport styles from \"./App.module.css\";\nimport AddUsers from \"./AddUsers\";\n\nconst INITIAL_USERS_COUNT = 10;\n\nfunction App() {\n  const [currentUsers, setCurrentUsers] = useState([{}]);\n  const { values, handleChange, errors, isValid, resetForm } =\n    useFormWithValidation();\n  const usersCountInputDebounced = useDebounce(values.usersCount, 500, isValid);\n  const [usersToDisplay, setUsersToDisplay] = useState([{}]);\n\n  useEffect(() => {\n    resetForm({ usersCount: INITIAL_USERS_COUNT }, { usersCount: \"\" }, true);\n    if (localStorage.getItem(\"usersCount\")) {\n      resetForm(\n        { usersCount: localStorage.getItem(\"usersCount\") },\n        { usersCount: \"\" },\n        true\n      );\n      localStorage.removeItem(\"usersCount\");\n    } else {\n      localStorage.setItem(\"usersCount\", INITIAL_USERS_COUNT);\n    }\n  }, [resetForm]);\n\n  useEffect(() => {\n    getUsers(usersCountInputDebounced)\n      .then((users) => {\n        setCurrentUsers(\n          users.map((user) => {\n            const renamedGender =\n              user.gender === \"male\" ? \"мужской\" : \"женский\";\n            return {\n              name: `${user.name.title} ${user.name.first} ${user.name.last}`,\n              gender: renamedGender,\n              email: user.email,\n            };\n          })\n        );\n        setUsersToDisplay(\n          users.map((user) => {\n            const renamedGender =\n              user.gender === \"male\" ? \"мужской\" : \"женский\";\n            return {\n              name: `${user.name.title} ${user.name.first} ${user.name.last}`,\n              gender: renamedGender,\n              email: user.email,\n            };\n          })\n        );\n      })\n      .catch((err) => console.log(err));\n    localStorage.setItem(\"usersCount\", usersCountInputDebounced);\n  }, [usersCountInputDebounced]);\n\n  // если нет юзеров заглушка \"нет пользователей\"\n  const usersCountHandleChange = (event) => {\n    handleChange(event);\n  };\n\n  return (\n    <div className={styles.app}>\n      <AddUsers\n        usersCountHandleChange={usersCountHandleChange}\n        resetForm={resetForm}\n        values={values}\n        isValid={isValid}\n        errors={errors}\n      />\n      <Table\n        usersToDisplay={usersToDisplay}\n        setUsersToDisplay={setUsersToDisplay}\n        currentUsers={currentUsers}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useCallback } from 'react';\r\n\r\n//хук управления формой и валидации формы\r\nexport default function useFormWithValidation() {\r\n    const [values, setValues] = React.useState({});\r\n    const [errors, setErrors] = React.useState({});\r\n    const [isValid, setIsValid] = React.useState(false);\r\n  \r\n    const handleChange = (event) => {\r\n      const target = event.target;\r\n      const name = target.name;\r\n      const value = target.value;\r\n      setValues({...values, [name]: value});\r\n      setErrors({...errors, [name]: target.validationMessage });\r\n      setIsValid(target.closest(\"form\").checkValidity());\r\n    };\r\n  \r\n    const resetForm = useCallback(\r\n      (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n        setValues(newValues);\r\n        setErrors(newErrors);\r\n        setIsValid(newIsValid);\r\n      },\r\n      [setValues, setErrors, setIsValid]\r\n    );\r\n  \r\n    return { values, handleChange, errors, isValid, resetForm };\r\n  }","import { useEffect, useState } from \"react\";\n\nexport default function useDebounce(value, delay, isValid) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    if (isValid) {\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n      return () => {\n        clearTimeout(handler);\n      };\n    }\n  }, [value, delay, isValid]);\n\n  return debouncedValue;\n}\n","export default function getUsers(usersNumber) {\n  return fetch(`https://api.randomuser.me/?results=${usersNumber}`)\n    .then((res) => res.json())\n    .then((res) => res.results);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}